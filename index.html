<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

	<title>mgo1977/c++-parsing-argument-options @ GitHub</title>
	
	<style type="text/css">
		body {
  		margin-top: 1.0em;
  		background-color: #58528e;
		  font-family: "helvetica"; 
  		color: #ffffff;
    }
    #container {
      margin: 0 auto;
      width: 700px;
    }
		h1 { font-size: 3.8em; color: #a7ad71; margin-bottom: 3px; }
		h1 .small { font-size: 0.4em; }
		h1 a { text-decoration: none }
		h2 { font-size: 1.5em; color: #a7ad71; }
    h3 { text-align: center; color: #a7ad71; }
    a { color: #a7ad71; }
    .description { font-size: 1.2em; margin-bottom: 30px; margin-top: 30px; font-style: italic;}
    .download { float: right; }
		pre { background: #000; color: #fff; padding: 15px;}
    hr { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    .footer { text-align:center; padding-top:30px; font-style: italic; }
	</style>
	
</head>

<body>
  <a href="http://github.com/mgo1977/c---parsing-argument-options"><img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub" /></a>
  
  <div id="container">

    <div class="download">
      <a href="http://github.com/mgo1977/c---parsing-argument-options/zipball/master">
        <img border="0" width="90" src="http://github.com/images/modules/download/zip.png"></a>
      <a href="http://github.com/mgo1977/c---parsing-argument-options/tarball/master">
        <img border="0" width="90" src="http://github.com/images/modules/download/tar.png"></a>
    </div>
      
    <h1><a href="http://github.com/mgo1977/c---parsing-argument-options">C++ Parsing Argument Options</a> 
      <span class="small">by <a href="http://github.com/mgo1977">mgo1977</a></small></h1>

    <div class="description">
      This is another ** very easy to use ** small C++ program to do argument option handling
    </div>

    <p>I've been looking for some alternatives to do my option argument parsing and I've found several ones. The thing that got my attention was the fact that most of that implementations were bigger in respect what I was expecting. So, I decided to try to write it by myself, as some kinda of proof of concept and took me only ~5 hours to get a decent set of features working.
    </p>
    
    <h2>Install</h2>
        <p>This is pretty simple... just include it into your C++, ie:<br>

<pre>
#include &lt;Parser.h&gt;
</pre>

and when doing compilation remember to add the directory where you have your header file, if you take a look at the Makefile in the project, for GNU G++ you will see the  "-I" option, ie:<br>

<pre>
$ g++ -Imy_inc_dir ....
</pre>

</p>

    <h2>Documentation</h2>
<p>

These are the main steps to use:<br>

<ol>
    <li>create all options, between set of the existing ones you have:<br><br>

    <ul> 
        <li>BoolOption   : will be set if the flag is specified.
                         it doesn't need more arguments, ie:
                         "-d" or "--debug"<br><br>
 
        <li>StringOption : will be set if specified, and the value will be
                         the next argument, ie:
                           "-uMariano" or "-u Mariano" or
                           "--username Mariano" or "--username=Mariano"<br><br>
 
       <li>IntegerOption
       <li>FloatOption
       <li>DoubleOption : will be set if specified, and the value will be the next argument, ie:
          "-p23" or "-p 23" or "--port 23" or "--port=23"

       <li>List types:
StringListOption, IntegerListOption,
FloatListOption and DoubleListOption
This list types will allow you to store more than the value when
the same option is specified more than once:<br>

<span style='padding-left:50px'>"--name mariano --name gustavo"<br>

If the "name" option was declared as a StringOption, then the last
one specified will be retain ("gustavo") in this case. But if you
use the StringListOption you'll get both string entries contained
within a list in the same order as they were typed.

      </ul>
      <br>
 
      Options can be mandatory, most of them can have a default value and
      passing the description information will autogenerate the usage legend,
      ie:<br>

<pre>
 
BoolOption    debug   ('d', "debug",        false, "enables the debug mode");
StringOption  username('u', "username",     true , "set the username");
IntegerOption port    ('p', "port",         false, 23, "server port");
FloatOption   port    ('n', "portability",  false, 1.11, "smart option...");
StringListOption  book('j', "book", false, "book of interest. could be more than one");



</pre><br>
 
      Note that<br><br>

      <ul>
       
          <li>the first argument specifies the character to be used as the short option<br><br>
          <li>the second argument specifies the string to be used as the long option<br><br>
          <li>the third argument tells if the option is mandatory (if not specified
              and error will be printed and the program will stop)<br><br>
          <li>in the cases of Options that receives values (StringOption, IntegerOption, etc...)
              a default value can be specified<br><br>
          <li>the description to be used in the usage text<br><br>

      </ul>

      <br> 
In our previous example:

<pre> 
$ ./example2
The following arguments are mandatory: -u|--username
Usage: ./example2 [-h|--help] [-d|--debug] -u|--username value
    [-p|--port value] [-n|--portability value]
Options:
 -h, --help                             print this help
 -d, --debug                            enables the debug mode
 -u, --username value                   set the username
 -p, --port value                       server port
 -n, --portability value                smart option...
 -j, --book value                       book of interest. could be more than one

</pre>
 
     It also tries to do full matching of the option, and if it's not successfull then it
     tries to get the option that best matches the argument. It can also detect ambiguities, ie:<br>
 
<pre>
$ ./example2 --por
Option 'por' is ambiguous: port, portability
Usage: ./example2 [-h|--help] [-d|--debug] -u|--username value
    [-p|--port value] [-n|--portability value]
Options:
 -h, --help                             print this help
 -d, --debug                            enables the debug mode
 -u, --username value                   set the username
 -p, --port value                       server port
 -n, --portability value                smart option...
 -j, --book value                       book of interest. could be more than one

</pre>
 
     Also, it's case independent, so, "--port" will be equal to "--PoRt"

     <br><br>
 
 <li>Now, the easy part: create the parser, add the options and parse it:<br>

 <pre>
Parser parser;

parser.addOption(debug)
      .addOption(username)
      .addOption(port)
      .addOption(portability)
      .addOption(book);

vector<string> otherArguments = parser.parse(argc, argv);
</pre>
 <br> 
      Note that the "parse()" will return you the other arguments that were specified in the
      command line and that weren't options, ie:<br>

<pre>
$ ./example2 --username=Mariano ARG1 -p 34 ARG2 --debug ARG3 ARG4
</pre>

      <br>
 
      then, the otherArguments vector will contain:<br>
 
<pre>
{ ARGUMENT1, ARGUMENT2, ARGUMENT3, ARGUMENT4 }
</pre>
 
      we do this in order to provide an easy way to recover them without needed to do some
      extra parsing of argv.<br><br>
 
      On your program, you can use the following methods to inspect the options:<br>
 
      <ul>
          <li>bool isSet() : will return you true if the option was specified, false otherwise<br><br>
 
          <li>TYPE getValue(): the value specified for this option or default value it was not
                               specified. TYPE will depend on the type of option, ie:
                                       BoolOption    will return a bool
                                       StringOption  will return a string
                                       IntegerOption will return an int
                                       so on...
       </ul>
        <br>

       Also please note, that's highly convenient to check is the option was set, prior to get
       the value (specially in non-defaulted value cases)
</ol> 

</p>


<h2>Code Example</h2>

<pre>
#include &lt;iostream&gt;
#include &lt;Parser.h&gt;

using namespace std;

int main(int argc, char** argv) {

    BoolOption    debug         ('d', "debug",      false, "enables the debug mode");
    StringOption  username      ('u', "username",   true , "set the username");
    IntegerOption port          ('p', "port",       false, 23, "server port");
    FloatOption   portability   ('n', "portability",false, "smart option...");
    StringListOption  book      ('j', "book",       false, "book of interest. could be more than one");

    // default value is the limit of the type. for int types =&gt; (sizeof(int) * 1024)
    std::list&lt;int&gt; defaultPortRange;
    defaultPortRange.push_back(1);
    defaultPortRange.push_back(sizeof(int)*1024);
    IntegerRange  portRange     ('r', "portrange",  false, defaultPortRange, "range of ports");

    Parser parser;

    parser.addOption(debug)
          .addOption(username)
          .addOption(port)
          .addOption(portability)
          .addOption(book)
          .addOption(portRange);

    vector&lt;string&gt; otherArguments = parser.parse(argc, argv);

    if ( debug.isSet() ) {
        cout &lt;&lt; "debug flag was set" &lt;&lt; endl;
    }

    // username is mandatory, so we don't need to check it
    cout &lt;&lt; "username was set to '" &lt;&lt; username.getValue() &lt;&lt; "'" &lt;&lt; endl;

    // port has a default value, so we can choose not to check it
    // and work with the default value transparently
    cout &lt;&lt; "port was set to '" &lt;&lt; port.getValue() &lt;&lt; "'" &lt;&lt; endl;


    if ( portability.isSet() ) {
        cout &lt;&lt; "portability was set to '" &lt;&lt; portability.getValue() &lt;&lt; "'" &lt;&lt; endl;
    }

    if ( book.isSet() ) {
        std::list&lt;std::string&gt; values = book.getValue();

        cout &lt;&lt; "book was set with " &lt;&lt; values.size() &lt;&lt; " entries: ";

        for(std::list&lt;string&gt;::iterator entry = values.begin();
            entry != values.end();
            ++entry
        ) {
            if ( entry != values.begin() )
                cout &lt;&lt; ", ";

            cout &lt;&lt; "'" &lt;&lt; *entry &lt;&lt; "'";
        }

        cout &lt;&lt; endl;

    }

    //if ( portRange.isSet() ) {
        std::list&lt;int&gt; list = portRange.getValue();
        if ( list.size() &gt; 0 ) {
            cout &lt;&lt; "Range seted from '" &lt;&lt; list.front() &lt;&lt; "' to '" &lt;&lt; list.back() &lt;&lt; "'." &lt;&lt; endl;
        } else {
            cout &lt;&lt; "is null" &lt;&lt; std::endl;
        }
    //}
 
    // if other arguments were specified, we can easily access them
    if ( ! otherArguments.empty() ) {

        cout &lt;&lt; "otherArguments: ";

        for(vector&lt;string&gt;::iterator argIter = otherArguments.begin();
            argIter != otherArguments.end();
            ++argIter
        ) {

            if ( argIter != otherArguments.begin() )
                cout &lt;&lt; ", ";

            cout &lt;&lt; "'" &lt;&lt; *argIter &lt;&lt; "'";

        }

        cout &lt;&lt; endl;

    }


}

</pre>



<h2>License</h2>
<p>LGPL</p>
<h2>Authors</h2>
<p>Mariano Ortega (mgo1977@gmail.com)<br/><br/>      </p>
<h2>Contact</h2>
<p>Mariano Ortega (mgo1977@gmail.com)<br/>      </p>


    <h2>Download</h2>
    <p>
      You can download this project in either
      <a href="http://github.com/mgo1977/c---parsing-argument-options/zipball/master">zip</a> or
      <a href="http://github.com/mgo1977/c---parsing-argument-options/tarball/master">tar</a> formats.
    </p>
    <p>You can also clone the project with <a href="http://git-scm.com">Git</a>
      by running:
      <pre>$ git clone git://github.com/mgo1977/c---parsing-argument-options</pre>
    </p>
      
    <div class="footer">
      get the source code on GitHub : <a href="http://github.com/mgo1977/c---parsing-argument-options">mgo1977/c---parsing-argument-options</a>
    </div>
    
  </div>

  
</body>
</html>
